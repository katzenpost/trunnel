// Code generated by trunnel. DO NOT EDIT.

package vararray

import (
	"encoding/binary"
	"errors"
)

type VarArray struct {
	NWords uint16
	Words  []uint32
}

func (v *VarArray) Parse(data []byte) ([]byte, error) {
	cur := data
	{
		if len(cur) < 2 {
			return nil, errors.New("data too short")
		}
		v.NWords = binary.BigEndian.Uint16(cur)
		cur = cur[2:]
	}
	{
		v.Words = make([]uint32, int(v.NWords))
		for idx := 0; idx < int(v.NWords); idx++ {
			if len(cur) < 4 {
				return nil, errors.New("data too short")
			}
			v.Words[idx] = binary.BigEndian.Uint32(cur)
			cur = cur[4:]
		}
	}
	return cur, nil
}
